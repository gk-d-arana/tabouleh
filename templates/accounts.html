{% extends "base.html" %}
{% load static %}


{% block style %}
<!-- <script src="https://zuixjs.github.io/zuix/js/zuix.min.js"></script> -->


<style>
  .btn.customer-type {
    background: #fff;
    border-radius: 20px;
    width: 13rem;
    margin: 20px 0;
  }
  .active-h{
    border-bottom: 2.4px solid;
  }
.content {
  font-family: serif;
  font-size: 110%;
  width: 100vw;
  height: 100vh;
  overflow-y: scroll;
}
.d1{
  display: flex;
}
.drawer {
  background: white;
}

.feed-pager {
  height: 100vh;
  z-index: 0;
}
.parent-h{
  cursor: pointer;
}
.choose-cust-type {
	background: #101010 !important;
	color: #fff !important;
}
@media (max-width:1000px) {
  .d1{
    display: block;
  }
  .cust-type-button-div{
    width: min-content;
  }
}
</style>
{% endblock style %}
  

{% block content %}
  <h1>Accounts</h1>

 <div class="d-flex justify-content-around align-items center">
   <h3 class="parent-h dvop-h active-h">Delivery</h3>
   <h3 class="parent-h admn-h">Admin</h3>
   <h3 class="parent-h cust-h">Customer</h3>
 </div>

<div class="dvop">
  <div class="mt-3 d1 justify-content-between ">
    <div class="col-xl-7 my-2 col-sm-12 col-md-12 col-lg-12 delivery_form card p-5" style="background-color: #EFF7FF">
     
      <h3 class="text-center">Create Delivery Account</h3>
      <form action="/cp_delivery_operator_register/" method="post">
        {% csrf_token %}
        <div class="mb-3">
          <input type="text" class="form-control my-3" name="username" placeholder="Username" required>
          <input type="password" class="form-control my-3" name="password" placeholder="Password" required>
          <input type="text" class="form-control my-3" name="first_name" placeholder="First Name" required>
          <input type="text" class="form-control my-3" name="last_name" placeholder="Last Name" required>
          <input type="email" class="form-control my-3" name="email" placeholder="Email" required>
          <input type="tel" class="form-control my-3" name="phone_number" placeholder="Phone Number" required>
        </div>
        <div class="d-flex justify-content-center align-items-ceter w-100">
          <input type="submit" class="btn px-5 text-white" value="Create Account" style="background-color: #2E346F;">
        </div>
      </form>
    </div>
    <div class="col-xl-3 my-2 col-sm-12 col-md-12 col-lg-12">
      <div class="card h-100 text-center">
              <div class="card-body">
                <h3 class="card-title">Accounts Created </h3>
                
                {% for delivery_operator in delivery_operators %}
                   <h4> {{delivery_operator.user.username}}</h4>
                   <p> {{delivery_operator.user.date_joined}}</p>
                {% endfor %}
                  
              </div>

            </div>
    </div>
  </div>
</div>



<div class="admn hidden">
  <div class="mt-3 d1 justify-content-between ">
    <div class="col-xl-7 my-2 col-sm-12 col-md-12 col-lg-12 delivery_form card p-5" style="background-color: #EFF7FF">
     
      <h3 class="text-center">Create Admin Account</h3>
      <form action="/admin_register/" method="post">
        {% csrf_token %}
        <div class="mb-3">
          <input type="text" class="form-control my-3" name="username" placeholder="Username" required>
          <input type="password" class="form-control my-3" name="password" placeholder="Password" required>
          <input type="text" class="form-control my-3" name="first_name" placeholder="First Name" required>
          <input type="text" class="form-control my-3" name="last_name" placeholder="Last Name" required>
          <input type="email" class="form-control my-3" name="email" placeholder="Email" required>
          <input type="tel" class="form-control my-3" name="phone_number" placeholder="Phone Number" required>
        </div>
        <div class="d-flex justify-content-center align-items-ceter w-100">
          <input type="submit" class="btn px-5 text-white" value="Create Account" style="background-color: #2E346F;">
        </div>
      </form>
    </div>
    <div class="col-xl-3 my-2 col-sm-12 col-md-12 col-lg-12">
      <div class="card h-100 text-center">
              <div class="card-body">
                <h3 class="card-title">Accounts Created </h3>
                
                {% for admin in admins %}
                   <h4> {{admin.user.username}}</h4>
                   <p> {{admin.user.date_joined}}</p>
                {% endfor %}
                  
              </div>

            </div>
    </div>
  </div>
</div>


<div class="cust hidden">
  <div class="mt-3 ms-3 d1 justify-content-between ">
    <div class="col-xl-1 my-2 col-sm-12 col-md-12 col-lg-12 d-flex justify-content-center align-items-center">
    <div class="cust-type-button-div">
      <div class="btn customer-type choose-cust-type" data-role="NormalCustomer">Normal Customer</div>
      <div class="btn customer-type" data-role="SuperMarketCustomer">Super Market Customer</div>
      <div class="btn customer-type" data-role="AgentCustomer">Agent Customer</div>
      <div class="btn customer-type" data-role="CompanyCustomer">Company Customer</div>
      <div class="btn customer-type" data-role="RestaurantCustomer">Restaurant Customer</div>
    </div>
    </div>
    <div class="col-xl-6 my-2 col-sm-12 col-md-12 col-lg-12 delivery_form card p-5" style="background-color: #EFF7FF">
     
      <h3 class="text-center">Create Customer Account</h3>
      <form action="/cp_customer_register/" method="post">
        {% csrf_token %}
        <div class="mb-3">
          <input type="text" class="form-control my-3" name="username" placeholder="Username" required>
          <input type="password" class="form-control my-3" name="password" placeholder="Password" required>
          <input type="text" class="form-control my-3" name="first_name" placeholder="First Name" required>
          <input type="text" class="form-control my-3" name="last_name" placeholder="Last Name" required>
          <input type="email" class="form-control my-3" name="email" placeholder="Email" required>
          <input type="tel" class="form-control my-3" name="phone_number" placeholder="Phone Number" required>
          <input type="hidden" value="NormalCustomer" class="customer_role" name="role">
        </div>
        <div class="d-flex justify-content-center align-items-ceter w-100">
          <input type="submit" class="btn px-5 text-white" value="Create Account" style="background-color: #2E346F;">
        </div>
      </form>
    </div>
    <div class="col-xl-3 my-2 col-sm-12 col-md-12 col-lg-12">
      <div class="card h-100 text-center">
              <div class="card-body">
                <h3 class="card-title">Accounts Created </h3>
                
                {% for customer in customers %}
                   <h4> {{customer.user.username}}</h4>
                   <p> {{customer.user.date_joined}}</p>
                {% endfor %}
                  
              </div>

            </div>
    </div>
  </div>
</div>




{% endblock content %}

{% block scripts %}
  
<script>
  $(document).ready(()=>{
    document.querySelectorAll('.parent-h').forEach(h => {
      h.addEventListener('click', (e) => {

        if($(e.target).hasClass('dvop-h')){
          $('.dvop').removeClass('hidden')
          $('.admn').addClass('hidden')
          $('.cust').addClass('hidden')
          document.querySelectorAll('.parent-h').forEach(h => {h.classList.remove('active-h')})
          e.target.classList.add('active-h')
        }
        else if($(e.target).hasClass('admn-h')){
          $('.dvop').addClass('hidden')
          $('.admn').removeClass('hidden')
          $('.cust').addClass('hidden')
          document.querySelectorAll('.parent-h').forEach(h => {h.classList.remove('active-h')})
          e.target.classList.add('active-h')
        }
        else if($(e.target).hasClass('cust-h')){
          $('.dvop').addClass('hidden')
          $('.admn').addClass('hidden')
          $('.cust').removeClass('hidden')
          document.querySelectorAll('.parent-h').forEach(h => {h.classList.remove('active-h')})
          e.target.classList.add('active-h')
        }
      })
    })

    document.querySelectorAll('.customer-type').forEach(ct => {
      ct.addEventListener('click', (e) => {
        
        document.querySelectorAll('.customer-type').forEach(_ct => {
          $(_ct).removeClass('choose-cust-type')
        })
        document.querySelector('.customer_role').value = $(e.target).data('role')
        $(e.target).addClass('choose-cust-type')
      })
    })

    /*

  <main data-ui-load="@lib/controllers/view_pager"
  data-ui-options="options.viewPager"
  class="feed-pager"
  draggable="false">

<!-- FEED -->
<section class="content" data-ui-load="@lib/controllers/header_auto_hide" data-ui-options="options.autoHidingBars">
 
 <!-- TODO: this is a temporary content place-holder -->
 <div data-ui-include="content/fake_list"></div>
 
</section>
<!-- WEEK -->
<section class="content" data-ui-load="@lib/controllers/header_auto_hide" data-ui-options="options.autoHidingBars">
 
 <!-- TODO: this is a temporary content place-holder -->
 <div data-ui-include="content/fake_list"></div>
 
</section>
<!-- MONTH -->
<section class="content" data-ui-load="@lib/controllers/header_auto_hide" data-ui-options="options.autoHidingBars">
 
 <!-- TODO: this is a temporary content place-holder -->
 <div data-ui-include="content/fake_list"></div>
 
</section>
<!-- YEAR -->
<section class="content" data-ui-load="@lib/controllers/header_auto_hide" data-ui-options="options.autoHidingBars">
 
 <!-- TODO: this is a temporary content place-holder -->
 <div data-ui-include="content/fake_list"></div>
 
</section>

<!-- INFINITY -->
<section class="content" data-ui-load="@lib/controllers/header_auto_hide" data-ui-options="options.autoHidingBars">
 
 <!-- TODO: this is a temporary content place-holder -->
 <div data-ui-include="content/fake_list"></div>
 
</section>

<!-- LATEST -->
<section class="content" data-ui-load="@lib/controllers/header_auto_hide" data-ui-options="options.autoHidingBars">
 
 <!-- TODO: this is a temporary content place-holder -->
 <div data-ui-include="content/fake_list"></div>
 
</section>

</main>

let drawerLayout;
let viewPager;
let topicIndicator;
let topicButtons;

zuix.$.find('.profile').on('click', function() {
  if (drawerLayout) drawerLayout.open();
});

window.options = {
  drawerLayout: {
    autoHideWidth: -1,
    drawerWidth: 280,
    ready: function() { drawerLayout = this; this.close(); }
  },
  viewPager: {
    enablePaging: true,
    on: {
      'page:change': function(e, page) {
        syncPageIndicator(page);
        // show header/footer
        if (viewPager) {
          const p = viewPager.get(page.in);
          zuix.context(p).show();
        }
      }
    },
    ready: function() {
      viewPager = this;
    }
  },
  topicIndicator: {
    enablePaging: true,
    ready: function() {
      topicIndicator = this;
    }
  },
  autoHidingBars: {
    header: 'header-bar',
    footer: 'footer-bar',
    height: 56,
    on: {
      'page:scroll': function(e, data) {
        zuix.componentize();
      }
    }
  },
  content: {
    css: false
  }
};

// Callback when the 'header' context is ready,
// that means that the 'layout/header' bit was loaded
zuix.context('header', function() {
  const view = zuix.$(this.view());
  // handle 'topic' buttons click (goto clicked topic page)
  topicButtons = view.find('.topics').children().each(function(i, el){
    this.on('click', function(e) {
      if (viewPager) viewPager.page(i);
    });
  });
  // open drawer when the profile icon is clicked
  view.find('.profile').on('click', function() {
    if (drawerLayout) drawerLayout.open();
  });
});

function syncPageIndicator(page) {
  if (topicButtons) {
    topicButtons.eq(page.out).removeClass('active');
    topicButtons.eq(page.in).addClass('active');
  }
  if (topicIndicator) topicIndicator.page(page.in);
}



// Turn off debug output
window.zuixNoConsoleOutput = true;
*/
  })


</script>
{% endblock scripts %}